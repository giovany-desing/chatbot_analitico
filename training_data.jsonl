{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Muestra los 10 productos más vendidos\nSQL: SELECT producto, SUM(cantidad) as total FROM ventas_preventivas GROUP BY producto ORDER BY total DESC LIMIT 10\nColumnas: [producto, total]\nFilas: 10\nData preview: [{\"producto\": \"Tela Algodón\", \"total\": 5000}, {\"producto\": \"Tela Poliéster\", \"total\": 4200}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 10 implica ranking de productos. Bar chart es ideal para comparar cantidades entre categorías discretas y mostrar claramente el orden de mayor a menor.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"total\", \"title\": \"Top 10 Productos Más Vendidos\", \"sort\": \"descending\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuáles son los 5 productos con menos ventas?\nSQL: SELECT producto, SUM(cantidad) as total FROM ventas_preventivas GROUP BY producto ORDER BY total ASC LIMIT 5\nColumnas: [producto, total]\nFilas: 5\nData preview: [{\"producto\": \"Tela Seda\", \"total\": 120}, {\"producto\": \"Tela Lino\", \"total\": 180}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Ranking de productos con menos ventas. Bar chart permite comparar fácilmente las cantidades más bajas.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"total\", \"title\": \"5 Productos con Menos Ventas\", \"sort\": \"ascending\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Muéstrame las ventas por mes del último año\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, SUM(total) as revenue FROM ventas_preventivas WHERE fecha_creacion >= DATE_SUB(NOW(), INTERVAL 1 YEAR) GROUP BY mes ORDER BY mes\nColumnas: [mes, revenue]\nFilas: 12\nData preview: [{\"mes\": \"2024-01\", \"revenue\": 45000.50}, {\"mes\": \"2024-02\", \"revenue\": 52000.75}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Datos temporales con columna de fechas (meses). Line chart es perfecto para mostrar tendencias y evolución a lo largo del tiempo.\", \"confidence\": 0.99, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"revenue\", \"title\": \"Evolución de Ventas por Mes\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Compara las ventas preventivas vs correctivas\nSQL: SELECT 'Preventivas' as tipo, COUNT(*) as ordenes, SUM(total) as revenue FROM ventas_preventivas UNION ALL SELECT 'Correctivas' as tipo, COUNT(*) as ordenes, SUM(total) as revenue FROM ventas_correctivas\nColumnas: [tipo, ordenes, revenue]\nFilas: 2\nData preview: [{\"tipo\": \"Preventivas\", \"ordenes\": 1500, \"revenue\": 250000}, {\"tipo\": \"Correctivas\", \"ordenes\": 450, \"revenue\": 75000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación entre dos categorías (preventivas vs correctivas). Bar chart permite comparar fácilmente las diferencias entre ambos tipos.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"tipo\", \"y_axis\": \"revenue\", \"title\": \"Comparación: Preventivas vs Correctivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución de ventas por producto\nSQL: SELECT producto, SUM(total) as revenue FROM ventas_preventivas GROUP BY producto\nColumnas: [producto, revenue]\nFilas: 5\nData preview: [{\"producto\": \"Tela Algodón\", \"revenue\": 120000}, {\"producto\": \"Tela Poliéster\", \"revenue\": 85000}, {\"producto\": \"Tela Lycra\", \"revenue\": 45000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Pocas categorías (5 productos) mostrando distribución de revenue total. Pie chart es ideal para mostrar partes de un todo y porcentajes.\", \"confidence\": 0.94, \"config\": {\"values\": \"revenue\", \"labels\": \"producto\", \"title\": \"Distribución de Ventas por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Gráfica las ventas mensuales de este año\nSQL: SELECT MONTH(fecha_creacion) as mes, SUM(total) as revenue FROM ventas_preventivas WHERE YEAR(fecha_creacion) = 2024 GROUP BY mes ORDER BY mes\nColumnas: [mes, revenue]\nFilas: 12\nData preview: [{\"mes\": 1, \"revenue\": 42000}, {\"mes\": 2, \"revenue\": 38000}, {\"mes\": 3, \"revenue\": 45000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal mostrando evolución mensual. Line chart permite visualizar tendencias y patrones estacionales.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"revenue\", \"title\": \"Ventas Mensuales 2024\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Top 15 órdenes de compra más grandes\nSQL: SELECT orden_compra, SUM(total) as total_orden FROM ventas_preventivas GROUP BY orden_compra ORDER BY total_orden DESC LIMIT 15\nColumnas: [orden_compra, total_orden]\nFilas: 15\nData preview: [{\"orden_compra\": 1001, \"total_orden\": 15000}, {\"orden_compra\": 1045, \"total_orden\": 12500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 15 indica ranking. Bar chart es óptimo para mostrar comparaciones de magnitudes entre órdenes.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"orden_compra\", \"y_axis\": \"total_orden\", \"title\": \"Top 15 Órdenes Más Grandes\", \"sort\": \"descending\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuántos productos vendemos?\nSQL: SELECT COUNT(DISTINCT producto) as total FROM ventas_preventivas\nColumnas: [total]\nFilas: 1\nData preview: [{\"total\": 25}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Query de métrica única (KPI). No requiere visualización gráfica, solo mostrar el número.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"total\", \"title\": \"Total de Productos\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Relación entre cantidad y precio total\nSQL: SELECT cantidad, total FROM ventas_preventivas WHERE producto = 'Tela Algodón'\nColumnas: [cantidad, total]\nFilas: 450\nData preview: [{\"cantidad\": 100, \"total\": 5000}, {\"cantidad\": 150, \"total\": 7500}, {\"cantidad\": 80, \"total\": 4000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"scatter\", \"reasoning\": \"Dos variables numéricas continuas. Scatter plot permite visualizar la correlación y relación entre cantidad y precio.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"cantidad\", \"y_axis\": \"total\", \"title\": \"Relación Cantidad vs Precio\", \"show_regression\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Muestra la tendencia trimestral de ventas\nSQL: SELECT CONCAT(YEAR(fecha_creacion), '-Q', QUARTER(fecha_creacion)) as trimestre, SUM(total) as revenue FROM ventas_preventivas GROUP BY trimestre ORDER BY trimestre\nColumnas: [trimestre, revenue]\nFilas: 8\nData preview: [{\"trimestre\": \"2023-Q1\", \"revenue\": 120000}, {\"trimestre\": \"2023-Q2\", \"revenue\": 135000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal trimestral. Line chart muestra claramente la tendencia y evolución a lo largo de los trimestres.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"trimestre\", \"y_axis\": \"revenue\", \"title\": \"Tendencia Trimestral de Ventas\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Dame el revenue total\nSQL: SELECT SUM(total) as revenue_total FROM ventas_preventivas\nColumnas: [revenue_total]\nFilas: 1\nData preview: [{\"revenue_total\": 1250000.50}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI único (revenue total). Se muestra mejor como métrica destacada, no requiere gráfico.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"revenue_total\", \"title\": \"Revenue Total\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Porcentaje de ventas por tipo (preventivas vs correctivas)\nSQL: SELECT tipo, revenue, ROUND(revenue * 100.0 / SUM(revenue) OVER(), 2) as porcentaje FROM (SELECT 'Preventivas' as tipo, SUM(total) as revenue FROM ventas_preventivas UNION ALL SELECT 'Correctivas' as tipo, SUM(total) as revenue FROM ventas_correctivas) t\nColumnas: [tipo, revenue, porcentaje]\nFilas: 2\nData preview: [{\"tipo\": \"Preventivas\", \"revenue\": 850000, \"porcentaje\": 77.27}, {\"tipo\": \"Correctivas\", \"revenue\": 250000, \"porcentaje\": 22.73}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Datos de distribución porcentual entre dos categorías. Pie chart es ideal para mostrar partes de un todo con porcentajes.\", \"confidence\": 0.97, \"config\": {\"values\": \"porcentaje\", \"labels\": \"tipo\", \"title\": \"Distribución Preventivas vs Correctivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Lista todos los productos\nSQL: SELECT DISTINCT producto FROM ventas_preventivas ORDER BY producto\nColumnas: [producto]\nFilas: 25\nData preview: [{\"producto\": \"Tela Algodón\"}, {\"producto\": \"Tela Denim\"}, {\"producto\": \"Tela Lycra\"}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Query de listado simple sin valores numéricos. Se muestra mejor como tabla, no requiere gráfico.\", \"confidence\": 0.98, \"config\": {\"display_type\": \"table\", \"columns\": [\"producto\"], \"title\": \"Lista de Productos\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Ranking de productos por cantidad vendida\nSQL: SELECT producto, SUM(cantidad) as total_cantidad FROM ventas_preventivas GROUP BY producto ORDER BY total_cantidad DESC LIMIT 20\nColumnas: [producto, total_cantidad]\nFilas: 20\nData preview: [{\"producto\": \"Tela Algodón\", \"total_cantidad\": 15000}, {\"producto\": \"Tela Poliéster\", \"total_cantidad\": 12000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Ranking de 20 productos por cantidad. Bar chart horizontal permite comparar fácilmente las cantidades.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"total_cantidad\", \"y_axis\": \"producto\", \"title\": \"Ranking por Cantidad Vendida\", \"orientation\": \"horizontal\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Evolución semanal de ventas del último mes\nSQL: SELECT WEEK(fecha_creacion) as semana, SUM(total) as revenue FROM ventas_preventivas WHERE fecha_creacion >= DATE_SUB(NOW(), INTERVAL 1 MONTH) GROUP BY semana ORDER BY semana\nColumnas: [semana, revenue]\nFilas: 4\nData preview: [{\"semana\": 48, \"revenue\": 32000}, {\"semana\": 49, \"revenue\": 35000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal semanal. Line chart muestra la evolución y tendencias de corto plazo.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"semana\", \"y_axis\": \"revenue\", \"title\": \"Evolución Semanal del Último Mes\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuál es el ticket promedio?\nSQL: SELECT AVG(total) as ticket_promedio FROM ventas_preventivas\nColumnas: [ticket_promedio]\nFilas: 1\nData preview: [{\"ticket_promedio\": 2345.67}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Métrica única (KPI). Se muestra mejor como valor destacado.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"ticket_promedio\", \"title\": \"Ticket Promedio\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución de precios de productos\nSQL: SELECT total FROM ventas_preventivas WHERE total > 0\nColumnas: [total]\nFilas: 5000\nData preview: [{\"total\": 1500}, {\"total\": 2300}, {\"total\": 890}, {\"total\": 4500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"histogram\", \"reasoning\": \"Muchos valores numéricos continuos para analizar distribución de frecuencias. Histogram muestra cómo se distribuyen los precios.\", \"confidence\": 0.94, \"config\": {\"x_axis\": \"total\", \"title\": \"Distribución de Precios\", \"bins\": 20}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Comparación de cantidades por producto\nSQL: SELECT producto, SUM(cantidad) as total FROM ventas_preventivas GROUP BY producto\nColumnas: [producto, total]\nFilas: 8\nData preview: [{\"producto\": \"Tela Algodón\", \"total\": 12000}, {\"producto\": \"Tela Poliéster\", \"total\": 9500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de cantidades entre productos (8 categorías). Bar chart permite comparar fácilmente.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"total\", \"title\": \"Cantidades por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Ventas diarias de la última semana\nSQL: SELECT DATE(fecha_creacion) as fecha, SUM(total) as revenue FROM ventas_preventivas WHERE fecha_creacion >= DATE_SUB(NOW(), INTERVAL 7 DAY) GROUP BY fecha ORDER BY fecha\nColumnas: [fecha, revenue]\nFilas: 7\nData preview: [{\"fecha\": \"2024-12-01\", \"revenue\": 8500}, {\"fecha\": \"2024-12-02\", \"revenue\": 9200}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal diaria. Line chart muestra la evolución día a día de la última semana.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"fecha\", \"y_axis\": \"revenue\", \"title\": \"Ventas Diarias - Última Semana\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Top 3 productos más caros\nSQL: SELECT producto, MAX(total) as precio_max FROM ventas_preventivas GROUP BY producto ORDER BY precio_max DESC LIMIT 3\nColumnas: [producto, precio_max]\nFilas: 3\nData preview: [{\"producto\": \"Tela Seda\", \"precio_max\": 25000}, {\"producto\": \"Tela Cashmere\", \"precio_max\": 22000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 3 indica ranking de precios. Bar chart es ideal para comparar pocas categorías.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"precio_max\", \"title\": \"Top 3 Productos Más Caros\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuántas órdenes preventivas hay?\nSQL: SELECT COUNT(*) as total FROM ventas_preventivas\nColumnas: [total]\nFilas: 1\nData preview: [{\"total\": 15623}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI simple de conteo. Se muestra mejor como número destacado.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"total\", \"title\": \"Total Órdenes Preventivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Participación de mercado por producto\nSQL: SELECT producto, SUM(total) as revenue, ROUND(SUM(total) * 100.0 / (SELECT SUM(total) FROM ventas_preventivas), 2) as participacion FROM ventas_preventivas GROUP BY producto\nColumnas: [producto, revenue, participacion]\nFilas: 6\nData preview: [{\"producto\": \"Tela Algodón\", \"revenue\": 450000, \"participacion\": 35.5}, {\"producto\": \"Tela Poliéster\", \"revenue\": 320000, \"participacion\": 25.2}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución de participación porcentual entre productos. Pie chart muestra claramente las proporciones de cada producto.\", \"confidence\": 0.96, \"config\": {\"values\": \"participacion\", \"labels\": \"producto\", \"title\": \"Participación de Mercado por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Análisis de correlación precio-cantidad para Tela Algodón\nSQL: SELECT cantidad, total, total/cantidad as precio_unitario FROM ventas_preventivas WHERE producto = 'Tela Algodón' AND cantidad > 0\nColumnas: [cantidad, total, precio_unitario]\nFilas: 850\nData preview: [{\"cantidad\": 100, \"total\": 5000, \"precio_unitario\": 50}, {\"cantidad\": 200, \"total\": 10000, \"precio_unitario\": 50}]"}, {"role": "assistant", "content": "{\"chart_type\": \"scatter\", \"reasoning\": \"Dos variables numéricas para análisis de correlación. Scatter plot permite visualizar la relación entre cantidad y precio.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"cantidad\", \"y_axis\": \"total\", \"title\": \"Correlación Cantidad vs Precio - Tela Algodón\", \"show_regression\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Comparativa anual de ventas\nSQL: SELECT YEAR(fecha_creacion) as año, SUM(total) as revenue FROM ventas_preventivas GROUP BY año ORDER BY año\nColumnas: [año, revenue]\nFilas: 3\nData preview: [{\"año\": 2022, \"revenue\": 850000}, {\"año\": 2023, \"revenue\": 1100000}, {\"año\": 2024, \"revenue\": 1350000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal anual mostrando evolución. Line chart permite ver claramente la tendencia de crecimiento año a año.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"año\", \"y_axis\": \"revenue\", \"title\": \"Evolución Anual de Ventas\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Los 5 mejores y 5 peores productos\nSQL: (SELECT producto, SUM(total) as revenue FROM ventas_preventivas GROUP BY producto ORDER BY revenue DESC LIMIT 5) UNION ALL (SELECT producto, SUM(total) as revenue FROM ventas_preventivas GROUP BY producto ORDER BY revenue ASC LIMIT 5)\nColumnas: [producto, revenue]\nFilas: 10\nData preview: [{\"producto\": \"Tela Algodón\", \"revenue\": 450000}, {\"producto\": \"Tela Seda\", \"revenue\": 5000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de extremos (mejores vs peores). Bar chart permite ver claramente la diferencia entre productos top y bottom.\", \"confidence\": 0.94, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"revenue\", \"title\": \"Top 5 y Bottom 5 Productos\", \"sort\": \"descending\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución de cantidades vendidas\nSQL: SELECT cantidad FROM ventas_preventivas WHERE cantidad > 0\nColumnas: [cantidad]\nFilas: 8500\nData preview: [{\"cantidad\": 100}, {\"cantidad\": 250}, {\"cantidad\": 75}, {\"cantidad\": 500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"histogram\", \"reasoning\": \"Muchos valores numéricos para análisis de distribución. Histogram muestra la frecuencia de diferentes rangos de cantidades.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"cantidad\", \"title\": \"Distribución de Cantidades Vendidas\", \"bins\": 25}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Ventas acumuladas por mes en 2024\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, SUM(total) as revenue FROM ventas_preventivas WHERE YEAR(fecha_creacion) = 2024 GROUP BY mes ORDER BY mes\nColumnas: [mes, revenue]\nFilas: 12\nData preview: [{\"mes\": \"2024-01\", \"revenue\": 85000}, {\"mes\": \"2024-02\", \"revenue\": 92000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal mensual de un año específico. Line chart con área permite visualizar volumen acumulado y tendencias.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"revenue\", \"title\": \"Ventas Mensuales 2024\", \"show_area\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuánto vendimos en total?\nSQL: SELECT SUM(total) as total_vendido FROM ventas_preventivas\nColumnas: [total_vendido]\nFilas: 1\nData preview: [{\"total_vendido\": 2450000.75}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Métrica única de suma total. KPI que se muestra mejor como valor destacado.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"total_vendido\", \"title\": \"Total Vendido\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos con más de 10000 unidades vendidas\nSQL: SELECT producto, SUM(cantidad) as total_unidades FROM ventas_preventivas GROUP BY producto HAVING total_unidades > 10000 ORDER BY total_unidades DESC\nColumnas: [producto, total_unidades]\nFilas: 7\nData preview: [{\"producto\": \"Tela Algodón\", \"total_unidades\": 25000}, {\"producto\": \"Tela Poliéster\", \"total_unidades\": 18000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Filtro de productos que superan threshold. Bar chart permite comparar las cantidades entre productos seleccionados.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"total_unidades\", \"title\": \"Productos con >10K Unidades\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Promedio de cantidad por orden\nSQL: SELECT AVG(cantidad) as promedio FROM ventas_preventivas\nColumnas: [promedio]\nFilas: 1\nData preview: [{\"promedio\": 185.5}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de promedio. Se muestra mejor como métrica única.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"promedio\", \"title\": \"Promedio Cantidad por Orden\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución de ventas preventivas vs correctivas\nSQL: SELECT 'Preventivas' as categoria, COUNT(*) as cantidad FROM ventas_preventivas UNION ALL SELECT 'Correctivas' as categoria, COUNT(*) as cantidad FROM ventas_correctivas\nColumnas: [categoria, cantidad]\nFilas: 2\nData preview: [{\"categoria\": \"Preventivas\", \"cantidad\": 15623}, {\"categoria\": \"Correctivas\", \"cantidad\": 4521}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución entre dos categorías. Pie chart muestra claramente la proporción de preventivas vs correctivas.\", \"confidence\": 0.96, \"config\": {\"values\": \"cantidad\", \"labels\": \"categoria\", \"title\": \"Distribución Preventivas vs Correctivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Revenue por trimestre de todos los años\nSQL: SELECT CONCAT(YEAR(fecha_creacion), '-Q', QUARTER(fecha_creacion)) as periodo, SUM(total) as revenue FROM ventas_preventivas GROUP BY periodo ORDER BY periodo\nColumnas: [periodo, revenue]\nFilas: 12\nData preview: [{\"periodo\": \"2022-Q1\", \"revenue\": 180000}, {\"periodo\": \"2022-Q2\", \"revenue\": 195000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal trimestral multi-año. Line chart permite visualizar tendencias de largo plazo y estacionalidad.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"periodo\", \"y_axis\": \"revenue\", \"title\": \"Revenue Trimestral Histórico\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Top 10 órdenes con más items\nSQL: SELECT orden_compra, COUNT(*) as num_items, SUM(total) as total_orden FROM ventas_preventivas GROUP BY orden_compra ORDER BY num_items DESC LIMIT 10\nColumnas: [orden_compra, num_items, total_orden]\nFilas: 10\nData preview: [{\"orden_compra\": 1023, \"num_items\": 25, \"total_orden\": 85000}, {\"orden_compra\": 1045, \"num_items\": 22, \"total_orden\": 75000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 10 órdenes por número de items. Bar chart permite comparar fácilmente el ranking.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"orden_compra\", \"y_axis\": \"num_items\", \"title\": \"Top 10 Órdenes con Más Items\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Análisis de distribución de precios unitarios\nSQL: SELECT total/cantidad as precio_unitario FROM ventas_preventivas WHERE cantidad > 0\nColumnas: [precio_unitario]\nFilas: 8000\nData preview: [{\"precio_unitario\": 45.5}, {\"precio_unitario\": 52.0}, {\"precio_unitario\": 38.75}]"}, {"role": "assistant", "content": "{\"chart_type\": \"histogram\", \"reasoning\": \"Muchos valores de precio unitario para análisis de distribución. Histogram muestra rangos de precios más frecuentes.\", \"confidence\": 0.94, \"config\": {\"x_axis\": \"precio_unitario\", \"title\": \"Distribución de Precios Unitarios\", \"bins\": 30}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Comparar productos A y B en ventas mensuales\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, producto, SUM(total) as revenue FROM ventas_preventivas WHERE producto IN ('Tela Algodón', 'Tela Poliéster') GROUP BY mes, producto ORDER BY mes\nColumnas: [mes, producto, revenue]\nFilas: 24\nData preview: [{\"mes\": \"2024-01\", \"producto\": \"Tela Algodón\", \"revenue\": 35000}, {\"mes\": \"2024-01\", \"producto\": \"Tela Poliéster\", \"revenue\": 28000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal con múltiples series (2 productos). Line chart con múltiples líneas permite comparar evolución de ambos productos.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"revenue\", \"series\": \"producto\", \"title\": \"Comparación Mensual: Algodón vs Poliéster\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuál es la orden de compra más grande?\nSQL: SELECT orden_compra, SUM(total) as total_orden FROM ventas_preventivas GROUP BY orden_compra ORDER BY total_orden DESC LIMIT 1\nColumnas: [orden_compra, total_orden]\nFilas: 1\nData preview: [{\"orden_compra\": 1089, \"total_orden\": 125000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Query que retorna un solo registro con información específica. Se muestra mejor como dato destacado.\", \"confidence\": 0.98, \"config\": {\"metric_type\": \"kpi\", \"value\": \"total_orden\", \"label\": \"orden_compra\", \"title\": \"Orden Más Grande\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Evolución del precio promedio por mes\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, AVG(total/cantidad) as precio_promedio FROM ventas_preventivas WHERE cantidad > 0 GROUP BY mes ORDER BY mes\nColumnas: [mes, precio_promedio]\nFilas: 18\nData preview: [{\"mes\": \"2023-07\", \"precio_promedio\": 42.5}, {\"mes\": \"2023-08\", \"precio_promedio\": 43.2}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal mostrando evolución de precios. Line chart permite visualizar tendencias de incremento o decremento de precios.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"precio_promedio\", \"title\": \"Evolución Precio Promedio por Mes\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Proporción de revenue por producto (top 4)\nSQL: SELECT producto, SUM(total) as revenue FROM ventas_preventivas GROUP BY producto ORDER BY revenue DESC LIMIT 4\nColumnas: [producto, revenue]\nFilas: 4\nData preview: [{\"producto\": \"Tela Algodón\", \"revenue\": 450000}, {\"producto\": \"Tela Poliéster\", \"revenue\": 320000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Pocas categorías (4) mostrando distribución de revenue. Pie chart es ideal para mostrar proporciones.\", \"confidence\": 0.95, \"config\": {\"values\": \"revenue\", \"labels\": \"producto\", \"title\": \"Top 4 Productos por Revenue\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos ordenados por revenue total\nSQL: SELECT producto, SUM(total) as revenue_total FROM ventas_preventivas GROUP BY producto ORDER BY revenue_total DESC\nColumnas: [producto, revenue_total]\nFilas: 18\nData preview: [{\"producto\": \"Tela Algodón\", \"revenue_total\": 450000}, {\"producto\": \"Tela Poliéster\", \"revenue_total\": 320000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Ranking completo de productos por revenue. Bar chart horizontal permite mostrar todas las categorías claramente.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"revenue_total\", \"y_axis\": \"producto\", \"title\": \"Productos por Revenue Total\", \"orientation\": \"horizontal\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuántas unidades vendimos en total?\nSQL: SELECT SUM(cantidad) as total_unidades FROM ventas_preventivas\nColumnas: [total_unidades]\nFilas: 1\nData preview: [{\"total_unidades\": 450000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de suma total de unidades. Se muestra mejor como número destacado.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"total_unidades\", \"title\": \"Total Unidades Vendidas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Relación entre total de orden y número de items\nSQL: SELECT COUNT(*) as num_items, SUM(total) as total_orden FROM ventas_preventivas GROUP BY orden_compra\nColumnas: [num_items, total_orden]\nFilas: 3500\nData preview: [{\"num_items\": 5, \"total_orden\": 25000}, {\"num_items\": 12, \"total_orden\": 58000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"scatter\", \"reasoning\": \"Dos variables numéricas para análisis de correlación. Scatter plot permite ver si más items implica mayor total.\", \"confidence\": 0.93, \"config\": {\"x_axis\": \"num_items\", \"y_axis\": \"total_orden\", \"title\": \"Relación Items vs Total de Orden\", \"show_regression\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Ventas del primer trimestre 2024\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, SUM(total) as revenue FROM ventas_preventivas WHERE fecha_creacion BETWEEN '2024-01-01' AND '2024-03-31' GROUP BY mes ORDER BY mes\nColumnas: [mes, revenue]\nFilas: 3\nData preview: [{\"mes\": \"2024-01\", \"revenue\": 85000}, {\"mes\": \"2024-02\", \"revenue\": 92000}, {\"mes\": \"2024-03\", \"revenue\": 88000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal trimestral. Line chart muestra la evolución en el periodo específico.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"revenue\", \"title\": \"Ventas Q1 2024\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Comparación entre productos más y menos vendidos\nSQL: SELECT producto, SUM(cantidad) as total FROM ventas_preventivas GROUP BY producto ORDER BY total DESC\nColumnas: [producto, total]\nFilas: 15\nData preview: [{\"producto\": \"Tela Algodón\", \"total\": 25000}, {\"producto\": \"Tela Seda\", \"total\": 800}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de todos los productos por cantidad. Bar chart permite ver el rango completo desde los más a los menos vendidos.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"total\", \"title\": \"Productos por Cantidad Vendida\", \"sort\": \"descending\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Lista de órdenes con sus totales\nSQL: SELECT orden_compra, SUM(total) as total_orden FROM ventas_preventivas GROUP BY orden_compra ORDER BY orden_compra\nColumnas: [orden_compra, total_orden]\nFilas: 3500\nData preview: [{\"orden_compra\": 1001, \"total_orden\": 15000}, {\"orden_compra\": 1002, \"total_orden\": 8500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Demasiadas filas (3500) sin solicitud específica de visualización. Se muestra mejor como tabla paginada.\", \"confidence\": 0.92, \"config\": {\"display_type\": \"table\", \"columns\": [\"orden_compra\", \"total_orden\"], \"title\": \"Lista de Órdenes\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Revenue por día de la semana\nSQL: SELECT DAYNAME(fecha_creacion) as dia, SUM(total) as revenue FROM ventas_preventivas GROUP BY dia ORDER BY FIELD(dia, 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday')\nColumnas: [dia, revenue]\nFilas: 7\nData preview: [{\"dia\": \"Monday\", \"revenue\": 180000}, {\"dia\": \"Tuesday\", \"revenue\": 195000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de revenue entre días de la semana (categoría cíclica). Bar chart permite identificar días con mayor actividad.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"dia\", \"y_axis\": \"revenue\", \"title\": \"Revenue por Día de la Semana\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución de órdenes por rango de precio\nSQL: SELECT CASE WHEN total < 5000 THEN '<5K' WHEN total < 10000 THEN '5K-10K' WHEN total < 20000 THEN '10K-20K' ELSE '>20K' END as rango, COUNT(*) as num_ordenes FROM ventas_preventivas GROUP BY rango\nColumnas: [rango, num_ordenes]\nFilas: 4\nData preview: [{\"rango\": \"<5K\", \"num_ordenes\": 8500}, {\"rango\": \"5K-10K\", \"num_ordenes\": 4200}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Distribución categórica por rangos de precio. Bar chart muestra claramente la cantidad de órdenes en cada rango.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"rango\", \"y_axis\": \"num_ordenes\", \"title\": \"Órdenes por Rango de Precio\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Total de productos únicos vendidos\nSQL: SELECT COUNT(DISTINCT producto) as total_productos FROM ventas_preventivas\nColumnas: [total_productos]\nFilas: 1\nData preview: [{\"total_productos\": 18}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de conteo único. Se muestra mejor como métrica destacada.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"total_productos\", \"title\": \"Total Productos Únicos\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Análisis de ventas por hora del día\nSQL: SELECT HOUR(fecha_creacion) as hora, COUNT(*) as num_ventas, SUM(total) as revenue FROM ventas_preventivas GROUP BY hora ORDER BY hora\nColumnas: [hora, num_ventas, revenue]\nFilas: 24\nData preview: [{\"hora\": 0, \"num_ventas\": 45, \"revenue\": 25000}, {\"hora\": 1, \"num_ventas\": 12, \"revenue\": 8500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal horaria (ciclo de 24h). Line chart permite ver patrones de actividad a lo largo del día.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"hora\", \"y_axis\": \"num_ventas\", \"title\": \"Actividad de Ventas por Hora\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Participación porcentual de cada producto en ventas correctivas\nSQL: SELECT producto, SUM(total) as revenue, ROUND(SUM(total) * 100.0 / (SELECT SUM(total) FROM ventas_correctivas), 2) as porcentaje FROM ventas_correctivas GROUP BY producto ORDER BY porcentaje DESC\nColumnas: [producto, revenue, porcentaje]\nFilas: 6\nData preview: [{\"producto\": \"Tela Algodón\", \"revenue\": 85000, \"porcentaje\": 42.5}, {\"producto\": \"Tela Poliéster\", \"porcentaje\": 28.3}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución porcentual entre productos. Pie chart muestra claramente la participación de cada uno.\", \"confidence\": 0.97, \"config\": {\"values\": \"porcentaje\", \"labels\": \"producto\", \"title\": \"Participación en Ventas Correctivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Top 8 productos con mayor crecimiento mensual\nSQL: SELECT producto, SUM(CASE WHEN MONTH(fecha_creacion) = 12 THEN total ELSE 0 END) - SUM(CASE WHEN MONTH(fecha_creacion) = 11 THEN total ELSE 0 END) as crecimiento FROM ventas_preventivas WHERE YEAR(fecha_creacion) = 2024 GROUP BY producto ORDER BY crecimiento DESC LIMIT 8\nColumnas: [producto, crecimiento]\nFilas: 8\nData preview: [{\"producto\": \"Tela Lycra\", \"crecimiento\": 15000}, {\"producto\": \"Tela Algodón\", \"crecimiento\": 12000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 8 por crecimiento. Bar chart permite comparar fácilmente cuáles productos crecieron más.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"crecimiento\", \"title\": \"Top 8 Productos con Mayor Crecimiento\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Cantidad promedio por producto\nSQL: SELECT producto, AVG(cantidad) as promedio FROM ventas_preventivas GROUP BY producto ORDER BY promedio DESC\nColumnas: [producto, promedio]\nFilas: 18\nData preview: [{\"producto\": \"Tela Algodón\", \"promedio\": 245.5}, {\"producto\": \"Tela Poliéster\", \"promedio\": 198.3}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de promedios entre productos. Bar chart permite ver qué productos tienen mayor cantidad promedio por venta.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"promedio\", \"title\": \"Cantidad Promedio por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Ventas año actual vs año anterior por mes\nSQL: SELECT MONTH(fecha_creacion) as mes, YEAR(fecha_creacion) as año, SUM(total) as revenue FROM ventas_preventivas WHERE YEAR(fecha_creacion) IN (2023, 2024) GROUP BY año, mes ORDER BY mes, año\nColumnas: [mes, año, revenue]\nFilas: 24\nData preview: [{\"mes\": 1, \"año\": 2023, \"revenue\": 75000}, {\"mes\": 1, \"año\": 2024, \"revenue\": 85000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Comparación temporal entre dos años. Line chart con dos series permite ver evolución y comparar año a año.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"revenue\", \"series\": \"año\", \"title\": \"Comparación 2023 vs 2024\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: ¿Cuántas órdenes hay en total?\nSQL: SELECT COUNT(DISTINCT orden_compra) as total_ordenes FROM ventas_preventivas\nColumnas: [total_ordenes]\nFilas: 1\nData preview: [{\"total_ordenes\": 3500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de conteo de órdenes únicas. Se muestra mejor como métrica.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"total_ordenes\", \"title\": \"Total Órdenes\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución acumulada de revenue\nSQL: SELECT total FROM ventas_preventivas ORDER BY total\nColumnas: [total]\nFilas: 15000\nData preview: [{\"total\": 150}, {\"total\": 280}, {\"total\": 450}]"}, {"role": "assistant", "content": "{\"chart_type\": \"histogram\", \"reasoning\": \"Gran cantidad de valores para análisis de distribución acumulada. Histogram muestra la frecuencia de diferentes rangos de revenue.\", \"confidence\": 0.93, \"config\": {\"x_axis\": \"total\", \"title\": \"Distribución de Revenue\", \"bins\": 40}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos más vendidos en correctivas\nSQL: SELECT producto, SUM(cantidad) as total FROM ventas_correctivas GROUP BY producto ORDER BY total DESC LIMIT 10\nColumnas: [producto, total]\nFilas: 10\nData preview: [{\"producto\": \"Tela Algodón\", \"total\": 5000}, {\"producto\": \"Tela Denim\", \"total\": 3800}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 10 productos en ventas correctivas. Bar chart permite comparar cantidades entre productos.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"total\", \"title\": \"Top 10 Productos en Correctivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Revenue mensual combinando preventivas y correctivas\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, SUM(total) as revenue FROM (SELECT fecha_creacion, total FROM ventas_preventivas UNION ALL SELECT fecha_creacion, total FROM ventas_correctivas) todas GROUP BY mes ORDER BY mes\nColumnas: [mes, revenue]\nFilas: 18\nData preview: [{\"mes\": \"2023-07\", \"revenue\": 125000}, {\"mes\": \"2023-08\", \"revenue\": 132000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal mensual combinando ambas tablas. Line chart muestra la tendencia total del negocio.\", \"confidence\": 0.98, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"revenue\", \"title\": \"Revenue Total Mensual\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos con ventas por debajo del promedio\nSQL: SELECT producto, SUM(total) as revenue FROM ventas_preventivas GROUP BY producto HAVING revenue < (SELECT AVG(total_prod) FROM (SELECT SUM(total) as total_prod FROM ventas_preventivas GROUP BY producto) tmp)\nColumnas: [producto, revenue]\nFilas: 9\nData preview: [{\"producto\": \"Tela Seda\", \"revenue\": 15000}, {\"producto\": \"Tela Lino\", \"revenue\": 18000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Filtro de productos bajo promedio. Bar chart permite identificar y comparar productos que necesitan atención.\", \"confidence\": 0.94, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"revenue\", \"title\": \"Productos por Debajo del Promedio\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Evolución del número de órdenes por mes\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, COUNT(DISTINCT orden_compra) as num_ordenes FROM ventas_preventivas GROUP BY mes ORDER BY mes\nColumnas: [mes, num_ordenes]\nFilas: 18\nData preview: [{\"mes\": \"2023-07\", \"num_ordenes\": 245}, {\"mes\": \"2023-08\", \"num_ordenes\": 268}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal del volumen de órdenes. Line chart muestra si el número de clientes/órdenes está creciendo.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"num_ordenes\", \"title\": \"Evolución de Número de Órdenes\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Análisis de variabilidad de precios por producto\nSQL: SELECT producto, STDDEV(total/cantidad) as desviacion FROM ventas_preventivas WHERE cantidad > 0 GROUP BY producto ORDER BY desviacion DESC\nColumnas: [producto, desviacion]\nFilas: 18\nData preview: [{\"producto\": \"Tela Seda\", \"desviacion\": 25.5}, {\"producto\": \"Tela Algodón\", \"desviacion\": 8.2}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de variabilidad (desviación estándar) entre productos. Bar chart muestra qué productos tienen precios más variables.\", \"confidence\": 0.93, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"desviacion\", \"title\": \"Variabilidad de Precios por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Concentración de ventas en top 3 productos\nSQL: SELECT CASE WHEN producto IN (SELECT producto FROM ventas_preventivas GROUP BY producto ORDER BY SUM(total) DESC LIMIT 3) THEN producto ELSE 'Otros' END as categoria, SUM(total) as revenue FROM ventas_preventivas GROUP BY categoria\nColumnas: [categoria, revenue]\nFilas: 4\nData preview: [{\"categoria\": \"Tela Algodón\", \"revenue\": 450000}, {\"categoria\": \"Otros\", \"revenue\": 280000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución mostrando concentración en top productos vs resto. Pie chart muestra claramente la proporción.\", \"confidence\": 0.96, \"config\": {\"values\": \"revenue\", \"labels\": \"categoria\", \"title\": \"Concentración: Top 3 vs Otros\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Máximo revenue en un mes\nSQL: SELECT MAX(revenue) as max_revenue FROM (SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, SUM(total) as revenue FROM ventas_preventivas GROUP BY mes) tmp\nColumnas: [max_revenue]\nFilas: 1\nData preview: [{\"max_revenue\": 185000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de valor máximo. Se muestra mejor como métrica destacada.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"max_revenue\", \"title\": \"Máximo Revenue Mensual\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Comparación preventivas vs correctivas por producto\nSQL: SELECT producto, SUM(CASE WHEN tipo = 'P' THEN total ELSE 0 END) as preventivas, SUM(CASE WHEN tipo = 'C' THEN total ELSE 0 END) as correctivas FROM (SELECT producto, total, 'P' as tipo FROM ventas_preventivas UNION ALL SELECT producto, total, 'C' as tipo FROM ventas_correctivas) todas GROUP BY producto\nColumnas: [producto, preventivas, correctivas]\nFilas: 20\nData preview: [{\"producto\": \"Tela Algodón\", \"preventivas\": 450000, \"correctivas\": 85000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de dos métricas por producto. Bar chart agrupado permite comparar preventivas vs correctivas para cada producto.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"producto\", \"y_axis\": [\"preventivas\", \"correctivas\"], \"title\": \"Preventivas vs Correctivas por Producto\", \"grouped\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Tasa de conversión preventivas a correctivas\nSQL: SELECT ROUND((SELECT COUNT(*) FROM ventas_correctivas) * 100.0 / (SELECT COUNT(*) FROM ventas_preventivas), 2) as tasa_conversion\nColumnas: [tasa_conversion]\nFilas: 1\nData preview: [{\"tasa_conversion\": 28.94}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de porcentaje calculado. Se muestra mejor como métrica con formato porcentual.\", \"confidence\": 0.98, \"config\": {\"metric_type\": \"kpi\", \"value\": \"tasa_conversion\", \"title\": \"Tasa de Conversión a Correctivas\", \"format\": \"percentage\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Estacionalidad de ventas por trimestre\nSQL: SELECT QUARTER(fecha_creacion) as trimestre, AVG(total) as promedio FROM ventas_preventivas GROUP BY trimestre ORDER BY trimestre\nColumnas: [trimestre, promedio]\nFilas: 4\nData preview: [{\"trimestre\": 1, \"promedio\": 2150}, {\"trimestre\": 2, \"promedio\": 2380}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de promedios por trimestre (datos cíclicos). Bar chart muestra patrones estacionales.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"trimestre\", \"y_axis\": \"promedio\", \"title\": \"Estacionalidad por Trimestre\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos con crecimiento negativo\nSQL: SELECT producto, (SUM(CASE WHEN YEAR(fecha_creacion) = 2024 THEN total ELSE 0 END) - SUM(CASE WHEN YEAR(fecha_creacion) = 2023 THEN total ELSE 0 END)) as diferencia FROM ventas_preventivas GROUP BY producto HAVING diferencia < 0 ORDER BY diferencia\nColumnas: [producto, diferencia]\nFilas: 5\nData preview: [{\"producto\": \"Tela Lino\", \"diferencia\": -15000}, {\"producto\": \"Tela Seda\", \"diferencia\": -8000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Productos con decrecimiento. Bar chart con valores negativos permite identificar productos problemáticos.\", \"confidence\": 0.94, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"diferencia\", \"title\": \"Productos con Decrecimiento 2023-2024\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Valor mínimo de venta\nSQL: SELECT MIN(total) as min_venta FROM ventas_preventivas WHERE total > 0\nColumnas: [min_venta]\nFilas: 1\nData preview: [{\"min_venta\": 125.50}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de valor mínimo. Se muestra mejor como métrica.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"min_venta\", \"title\": \"Venta Mínima\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Densidad de órdenes por mes\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, COUNT(DISTINCT DATE(fecha_creacion)) as dias_activos, COUNT(*) as total_items FROM ventas_preventivas GROUP BY mes ORDER BY mes\nColumnas: [mes, dias_activos, total_items]\nFilas: 18\nData preview: [{\"mes\": \"2023-07\", \"dias_activos\": 28, \"total_items\": 1250}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal mostrando actividad mensual. Line chart permite visualizar tendencias de intensidad operativa.\", \"confidence\": 0.93, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"total_items\", \"title\": \"Intensidad de Operaciones por Mes\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Proporción de revenue entre 3 productos principales\nSQL: SELECT producto, SUM(total) as revenue FROM ventas_preventivas WHERE producto IN ('Tela Algodón', 'Tela Poliéster', 'Tela Lycra') GROUP BY producto\nColumnas: [producto, revenue]\nFilas: 3\nData preview: [{\"producto\": \"Tela Algodón\", \"revenue\": 450000}, {\"producto\": \"Tela Poliéster\", \"revenue\": 320000}, {\"producto\": \"Tela Lycra\", \"revenue\": 180000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución entre 3 productos específicos. Pie chart muestra claramente las proporciones relativas.\", \"confidence\": 0.96, \"config\": {\"values\": \"revenue\", \"labels\": \"producto\", \"title\": \"Revenue: Top 3 Productos\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Correlación entre precio unitario y cantidad en todas las ventas\nSQL: SELECT cantidad, total/cantidad as precio_unitario FROM ventas_preventivas WHERE cantidad > 0 AND cantidad < 1000\nColumnas: [cantidad, precio_unitario]\nFilas: 7500\nData preview: [{\"cantidad\": 100, \"precio_unitario\": 48.5}, {\"cantidad\": 250, \"precio_unitario\": 45.2}]"}, {"role": "assistant", "content": "{\"chart_type\": \"scatter\", \"reasoning\": \"Dos variables continuas para análisis de correlación. Scatter plot permite detectar si hay descuentos por volumen.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"cantidad\", \"y_axis\": \"precio_unitario\", \"title\": \"Relación Cantidad vs Precio Unitario\", \"show_regression\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Ranking de órdenes por valor total (top 12)\nSQL: SELECT orden_compra, SUM(total) as valor_total FROM ventas_preventivas GROUP BY orden_compra ORDER BY valor_total DESC LIMIT 12\nColumnas: [orden_compra, valor_total]\nFilas: 12\nData preview: [{\"orden_compra\": 1089, \"valor_total\": 125000}, {\"orden_compra\": 1045, \"valor_total\": 98000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 12 órdenes más valiosas. Bar chart permite comparar y rankear fácilmente.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"orden_compra\", \"y_axis\": \"valor_total\", \"title\": \"Top 12 Órdenes Más Valiosas\", \"sort\": \"descending\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Mediana de precios por producto\nSQL: SELECT producto, AVG(total) as mediana_aprox FROM ventas_preventivas GROUP BY producto ORDER BY mediana_aprox DESC\nColumnas: [producto, mediana_aprox]\nFilas: 18\nData preview: [{\"producto\": \"Tela Seda\", \"mediana_aprox\": 8500}, {\"producto\": \"Tela Algodón\", \"mediana_aprox\": 2300}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de medianas entre productos. Bar chart permite identificar productos de mayor valor típico.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"mediana_aprox\", \"title\": \"Precio Mediano por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Evolución del volumen de unidades por trimestre\nSQL: SELECT CONCAT(YEAR(fecha_creacion), '-Q', QUARTER(fecha_creacion)) as trimestre, SUM(cantidad) as unidades FROM ventas_preventivas GROUP BY trimestre ORDER BY trimestre\nColumnas: [trimestre, unidades]\nFilas: 12\nData preview: [{\"trimestre\": \"2022-Q1\", \"unidades\": 45000}, {\"trimestre\": \"2022-Q2\", \"unidades\": 52000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal trimestral de volumen. Line chart muestra tendencia de crecimiento en unidades.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"trimestre\", \"y_axis\": \"unidades\", \"title\": \"Evolución de Unidades por Trimestre\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos con ventas solo en correctivas\nSQL: SELECT c.producto FROM ventas_correctivas c LEFT JOIN ventas_preventivas p ON c.producto = p.producto WHERE p.producto IS NULL GROUP BY c.producto\nColumnas: [producto]\nFilas: 3\nData preview: [{\"producto\": \"Tela Reparación A\"}, {\"producto\": \"Tela Reparación B\"}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Lista simple de productos sin valores numéricos. Se muestra mejor como lista o tabla.\", \"confidence\": 0.97, \"config\": {\"display_type\": \"table\", \"columns\": [\"producto\"], \"title\": \"Productos Solo en Correctivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución de totales en preventivas\nSQL: SELECT total FROM ventas_preventivas WHERE total BETWEEN 1000 AND 50000\nColumnas: [total]\nFilas: 12000\nData preview: [{\"total\": 2500}, {\"total\": 3800}, {\"total\": 1850}]"}, {"role": "assistant", "content": "{\"chart_type\": \"histogram\", \"reasoning\": \"Gran volumen de datos numéricos para distribución. Histogram muestra la frecuencia de diferentes rangos de valores.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"total\", \"title\": \"Distribución de Valores de Venta\", \"bins\": 35}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Número de ventas por producto en el último mes\nSQL: SELECT producto, COUNT(*) as num_ventas FROM ventas_preventivas WHERE fecha_creacion >= DATE_SUB(NOW(), INTERVAL 1 MONTH) GROUP BY producto ORDER BY num_ventas DESC\nColumnas: [producto, num_ventas]\nFilas: 15\nData preview: [{\"producto\": \"Tela Algodón\", \"num_ventas\": 85}, {\"producto\": \"Tela Poliéster\", \"num_ventas\": 62}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de frecuencia de ventas entre productos. Bar chart muestra qué productos se venden más seguido.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"num_ventas\", \"title\": \"Frecuencia de Ventas por Producto (Último Mes)\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Total revenue de correctivas\nSQL: SELECT SUM(total) as revenue_correctivas FROM ventas_correctivas\nColumnas: [revenue_correctivas]\nFilas: 1\nData preview: [{\"revenue_correctivas\": 385000.25}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"KPI de suma total. Se muestra mejor como métrica destacada.\", \"confidence\": 0.99, \"config\": {\"metric_type\": \"kpi\", \"value\": \"revenue_correctivas\", \"title\": \"Revenue Total Correctivas\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Comparación bimestral de ventas en 2024\nSQL: SELECT FLOOR((MONTH(fecha_creacion)-1)/2) + 1 as bimestre, SUM(total) as revenue FROM ventas_preventivas WHERE YEAR(fecha_creacion) = 2024 GROUP BY bimestre ORDER BY bimestre\nColumnas: [bimestre, revenue]\nFilas: 6\nData preview: [{\"bimestre\": 1, \"revenue\": 175000}, {\"bimestre\": 2, \"revenue\": 188000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal bimestral. Line chart muestra evolución en periodos de 2 meses.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"bimestre\", \"y_axis\": \"revenue\", \"title\": \"Evolución Bimestral 2024\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos con ticket promedio mayor a 5000\nSQL: SELECT producto, AVG(total) as ticket_promedio FROM ventas_preventivas GROUP BY producto HAVING ticket_promedio > 5000 ORDER BY ticket_promedio DESC\nColumnas: [producto, ticket_promedio]\nFilas: 4\nData preview: [{\"producto\": \"Tela Seda\", \"ticket_promedio\": 12500}, {\"producto\": \"Tela Cashmere\", \"ticket_promedio\": 8700}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Filtro de productos premium por ticket alto. Bar chart permite comparar los tickets promedio.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"ticket_promedio\", \"title\": \"Productos Premium (Ticket >$5000)\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Proporción de órdenes pequeñas, medianas y grandes\nSQL: SELECT CASE WHEN total < 5000 THEN 'Pequeña' WHEN total < 20000 THEN 'Mediana' ELSE 'Grande' END as tamaño, COUNT(*) as cantidad FROM ventas_preventivas GROUP BY tamaño\nColumnas: [tamaño, cantidad]\nFilas: 3\nData preview: [{\"tamaño\": \"Pequeña\", \"cantidad\": 8500}, {\"tamaño\": \"Mediana\", \"cantidad\": 5200}, {\"tamaño\": \"Grande\", \"cantidad\": 1923}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución categórica en 3 grupos. Pie chart muestra claramente la proporción de cada tamaño de orden.\", \"confidence\": 0.97, \"config\": {\"values\": \"cantidad\", \"labels\": \"tamaño\", \"title\": \"Distribución por Tamaño de Orden\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Crecimiento porcentual mensual de revenue\nSQL: SELECT mes, revenue, LAG(revenue) OVER (ORDER BY mes) as mes_anterior, ROUND((revenue - LAG(revenue) OVER (ORDER BY mes)) * 100.0 / LAG(revenue) OVER (ORDER BY mes), 2) as crecimiento FROM (SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, SUM(total) as revenue FROM ventas_preventivas GROUP BY mes) tmp ORDER BY mes\nColumnas: [mes, revenue, mes_anterior, crecimiento]\nFilas: 18\nData preview: [{\"mes\": \"2023-08\", \"revenue\": 125000, \"mes_anterior\": 120000, \"crecimiento\": 4.17}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal de crecimiento porcentual. Line chart permite visualizar aceleración o desaceleración del negocio.\", \"confidence\": 0.94, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"crecimiento\", \"title\": \"Crecimiento % Mensual\", \"show_zero_line\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Análisis de outliers en cantidades\nSQL: SELECT cantidad FROM ventas_preventivas WHERE cantidad > (SELECT AVG(cantidad) + 3 * STDDEV(cantidad) FROM ventas_preventivas)\nColumnas: [cantidad]\nFilas: 25\nData preview: [{\"cantidad\": 2500}, {\"cantidad\": 3200}, {\"cantidad\": 2800}]"}, {"role": "assistant", "content": "{\"chart_type\": \"histogram\", \"reasoning\": \"Distribución de valores extremos (outliers). Histogram muestra la concentración de estos valores atípicos.\", \"confidence\": 0.91, \"config\": {\"x_axis\": \"cantidad\", \"title\": \"Distribución de Cantidades Extremas\", \"bins\": 10}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Índice de concentración de revenue (top 5 vs resto)\nSQL: SELECT categoria, SUM(revenue) as total FROM (SELECT CASE WHEN ranking <= 5 THEN producto ELSE 'Resto' END as categoria, revenue FROM (SELECT producto, SUM(total) as revenue, ROW_NUMBER() OVER (ORDER BY SUM(total) DESC) as ranking FROM ventas_preventivas GROUP BY producto) ranked) categorizado GROUP BY categoria\nColumnas: [categoria, total]\nFilas: 6\nData preview: [{\"categoria\": \"Tela Algodón\", \"total\": 450000}, {\"categoria\": \"Resto\", \"total\": 180000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución mostrando concentración de revenue. Pie chart muestra qué porcentaje representan los top 5 vs el resto.\", \"confidence\": 0.95, \"config\": {\"values\": \"total\", \"labels\": \"categoria\", \"title\": \"Concentración de Revenue: Top 5 vs Resto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Índice de recurrencia por producto (ventas/órdenes)\nSQL: SELECT producto, COUNT(*) as num_ventas, COUNT(DISTINCT orden_compra) as num_ordenes, ROUND(COUNT(*) * 1.0 / COUNT(DISTINCT orden_compra), 2) as recurrencia FROM ventas_preventivas GROUP BY producto ORDER BY recurrencia DESC\nColumnas: [producto, num_ventas, num_ordenes, recurrencia]\nFilas: 18\nData preview: [{\"producto\": \"Tela Algodón\", \"num_ventas\": 2500, \"num_ordenes\": 1200, \"recurrencia\": 2.08}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de índice de recurrencia entre productos. Bar chart muestra qué productos aparecen más veces por orden.\", \"confidence\": 0.94, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"recurrencia\", \"title\": \"Índice de Recurrencia por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Comparación de revenue preventivas vs correctivas por mes\nSQL: SELECT mes, SUM(CASE WHEN tipo = 'P' THEN revenue ELSE 0 END) as preventivas, SUM(CASE WHEN tipo = 'C' THEN revenue ELSE 0 END) as correctivas FROM (SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, total as revenue, 'P' as tipo FROM ventas_preventivas UNION ALL SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, total as revenue, 'C' as tipo FROM ventas_correctivas) todas GROUP BY mes ORDER BY mes\nColumnas: [mes, preventivas, correctivas]\nFilas: 18\nData preview: [{\"mes\": \"2023-07\", \"preventivas\": 125000, \"correctivas\": 28000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal comparando dos métricas. Line chart con dos líneas permite ver evolución de ambas simultáneamente.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"mes\", \"y_axis\": [\"preventivas\", \"correctivas\"], \"title\": \"Evolución: Preventivas vs Correctivas\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Ratio preventivas/correctivas por producto\nSQL: SELECT p.producto, COALESCE(p.total, 0) as prev, COALESCE(c.total, 0) as corr, CASE WHEN c.total > 0 THEN ROUND(p.total / c.total, 2) ELSE NULL END as ratio FROM (SELECT producto, SUM(total) as total FROM ventas_preventivas GROUP BY producto) p LEFT JOIN (SELECT producto, SUM(total) as total FROM ventas_correctivas GROUP BY producto) c ON p.producto = c.producto\nColumnas: [producto, prev, corr, ratio]\nFilas: 20\nData preview: [{\"producto\": \"Tela Algodón\", \"prev\": 450000, \"corr\": 85000, \"ratio\": 5.29}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Comparación de ratio entre productos. Bar chart muestra qué productos tienen mayor proporción preventivas/correctivas.\", \"confidence\": 0.93, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"ratio\", \"title\": \"Ratio Preventivas/Correctivas por Producto\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Cantidad de órdenes únicas por mes\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, COUNT(DISTINCT orden_compra) as ordenes_unicas FROM ventas_preventivas GROUP BY mes ORDER BY mes\nColumnas: [mes, ordenes_unicas]\nFilas: 18\nData preview: [{\"mes\": \"2023-07\", \"ordenes_unicas\": 245}, {\"mes\": \"2023-08\", \"ordenes_unicas\": 268}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal del número de clientes/órdenes. Line chart muestra si la base de clientes está creciendo.\", \"confidence\": 0.97, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"ordenes_unicas\", \"title\": \"Órdenes Únicas por Mes\", \"show_trend\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos sin ventas en el último trimestre\nSQL: SELECT DISTINCT p1.producto FROM (SELECT DISTINCT producto FROM ventas_preventivas) p1 LEFT JOIN (SELECT DISTINCT producto FROM ventas_preventivas WHERE fecha_creacion >= DATE_SUB(NOW(), INTERVAL 3 MONTH)) p2 ON p1.producto = p2.producto WHERE p2.producto IS NULL\nColumnas: [producto]\nFilas: 3\nData preview: [{\"producto\": \"Tela Vintage A\"}, {\"producto\": \"Tela Descontinuada B\"}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Lista de productos sin datos numéricos asociados. Se muestra mejor como tabla o lista.\", \"confidence\": 0.98, \"config\": {\"display_type\": \"table\", \"columns\": [\"producto\"], \"title\": \"Productos Sin Ventas (Último Trimestre)\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Análisis de varianza de revenue mensual\nSQL: SELECT VARIANCE(revenue) as varianza, STDDEV(revenue) as desviacion FROM (SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, SUM(total) as revenue FROM ventas_preventivas GROUP BY mes) tmp\nColumnas: [varianza, desviacion]\nFilas: 1\nData preview: [{\"varianza\": 125000000, \"desviacion\": 11180.34}]"}, {"role": "assistant", "content": "{\"chart_type\": \"none\", \"reasoning\": \"Métricas estadísticas calculadas. Se muestran mejor como KPIs numéricos.\", \"confidence\": 0.97, \"config\": {\"metric_type\": \"kpi\", \"value\": \"desviacion\", \"title\": \"Desviación Estándar de Revenue Mensual\", \"format\": \"currency\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Promedio de items por orden a lo largo del tiempo\nSQL: SELECT DATE_FORMAT(fecha_creacion, '%Y-%m') as mes, AVG(items_por_orden) as promedio FROM (SELECT fecha_creacion, orden_compra, COUNT(*) as items_por_orden FROM ventas_preventivas GROUP BY orden_compra, fecha_creacion) tmp GROUP BY mes ORDER BY mes\nColumnas: [mes, promedio]\nFilas: 18\nData preview: [{\"mes\": \"2023-07\", \"promedio\": 4.5}, {\"mes\": \"2023-08\", \"promedio\": 4.8}]"}, {"role": "assistant", "content": "{\"chart_type\": \"line\", \"reasoning\": \"Serie temporal mostrando evolución del tamaño promedio de órdenes. Line chart permite ver si las órdenes están creciendo en complejidad.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"mes\", \"y_axis\": \"promedio\", \"title\": \"Evolución Items Promedio por Orden\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Top 6 productos por margen (asumiendo costo fijo)\nSQL: SELECT producto, SUM(total) as revenue, SUM(cantidad) * 30 as costo_estimado, SUM(total) - (SUM(cantidad) * 30) as margen FROM ventas_preventivas GROUP BY producto ORDER BY margen DESC LIMIT 6\nColumnas: [producto, revenue, costo_estimado, margen]\nFilas: 6\nData preview: [{\"producto\": \"Tela Seda\", \"revenue\": 250000, \"costo_estimado\": 60000, \"margen\": 190000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 6 por margen de ganancia. Bar chart permite comparar los productos más rentables.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"margen\", \"title\": \"Top 6 Productos por Margen Estimado\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Distribución geográfica de órdenes (si tuviéramos región)\nSQL: SELECT 'Norte' as region, COUNT(*) as ordenes UNION SELECT 'Sur', COUNT(*) FROM ventas_preventivas UNION SELECT 'Este', COUNT(*) FROM ventas_preventivas UNION SELECT 'Oeste', COUNT(*) FROM ventas_preventivas\nColumnas: [region, ordenes]\nFilas: 4\nData preview: [{\"region\": \"Norte\", \"ordenes\": 3500}, {\"region\": \"Sur\", \"ordenes\": 3500}]"}, {"role": "assistant", "content": "{\"chart_type\": \"pie\", \"reasoning\": \"Distribución por regiones geográficas. Pie chart muestra la proporción de cada región.\", \"confidence\": 0.94, \"config\": {\"values\": \"ordenes\", \"labels\": \"region\", \"title\": \"Distribución por Región\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Correlación entre día del mes y volumen de ventas\nSQL: SELECT DAY(fecha_creacion) as dia_mes, AVG(total) as promedio_venta, COUNT(*) as num_ventas FROM ventas_preventivas GROUP BY dia_mes ORDER BY dia_mes\nColumnas: [dia_mes, promedio_venta, num_ventas]\nFilas: 31\nData preview: [{\"dia_mes\": 1, \"promedio_venta\": 2300, \"num_ventas\": 250}, {\"dia_mes\": 2, \"promedio_venta\": 2150, \"num_ventas\": 245}]"}, {"role": "assistant", "content": "{\"chart_type\": \"scatter\", \"reasoning\": \"Análisis de correlación entre día del mes y actividad. Scatter plot permite detectar patrones (ej: fin de mes).\", \"confidence\": 0.92, \"config\": {\"x_axis\": \"dia_mes\", \"y_axis\": \"num_ventas\", \"title\": \"Actividad por Día del Mes\", \"show_regression\": true}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Productos con crecimiento superior al 50% año a año\nSQL: SELECT producto, SUM(CASE WHEN YEAR(fecha_creacion) = 2023 THEN total ELSE 0 END) as año_2023, SUM(CASE WHEN YEAR(fecha_creacion) = 2024 THEN total ELSE 0 END) as año_2024, ROUND((SUM(CASE WHEN YEAR(fecha_creacion) = 2024 THEN total ELSE 0 END) - SUM(CASE WHEN YEAR(fecha_creacion) = 2023 THEN total ELSE 0 END)) * 100.0 / SUM(CASE WHEN YEAR(fecha_creacion) = 2023 THEN total ELSE 0 END), 2) as crecimiento_pct FROM ventas_preventivas GROUP BY producto HAVING crecimiento_pct > 50\nColumnas: [producto, año_2023, año_2024, crecimiento_pct]\nFilas: 5\nData preview: [{\"producto\": \"Tela Lycra\", \"año_2023\": 80000, \"año_2024\": 135000, \"crecimiento_pct\": 68.75}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Productos con alto crecimiento. Bar chart permite comparar el porcentaje de crecimiento entre productos exitosos.\", \"confidence\": 0.95, \"config\": {\"x_axis\": \"producto\", \"y_axis\": \"crecimiento_pct\", \"title\": \"Productos con Crecimiento >50%\"}}"}]}
{"messages": [{"role": "system", "content": "Eres un experto en visualización de datos para análisis de ventas textiles. Debes elegir el mejor tipo de gráfico basándote en la query del usuario y los datos SQL disponibles."}, {"role": "user", "content": "Query: Semanas con mayor actividad en el año\nSQL: SELECT WEEK(fecha_creacion) as semana, COUNT(*) as num_ventas, SUM(total) as revenue FROM ventas_preventivas WHERE YEAR(fecha_creacion) = 2024 GROUP BY semana ORDER BY revenue DESC LIMIT 10\nColumnas: [semana, num_ventas, revenue]\nFilas: 10\nData preview: [{\"semana\": 48, \"num_ventas\": 850, \"revenue\": 425000}, {\"semana\": 25, \"num_ventas\": 780, \"revenue\": 385000}]"}, {"role": "assistant", "content": "{\"chart_type\": \"bar\", \"reasoning\": \"Top 10 semanas por revenue. Bar chart permite identificar las semanas de mayor actividad comercial.\", \"confidence\": 0.96, \"config\": {\"x_axis\": \"semana\", \"y_axis\": \"revenue\", \"title\": \"Top 10 Semanas por Revenue 2024\"}}"}]}
